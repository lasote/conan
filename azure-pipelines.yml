variables:
  runner: '.ci/jenkins/runner.py'
  module: '"conans.test"'
  api_conf: 'v1'
  flavor: 'no_revisions'
  num_cores: 4
  workdir: "."
  sourcedir: "."

resources:
  containers:
  - container: conan_tests
    image: lasote/conantests

pool:
  vmImage: 'Ubuntu 16.04'

strategy:
  matrix:
    linux_py2:
      pyver: py27
    linux_py3:
      pyver: py36

container: conan_tests


steps:
- script: echo Hello, world!
  displayName: 'Run a one-line script'

- script: python $(runner) $(module) $(pyver) $(sourcedir) $(workdir) -e rest_api $(numcores) --server_api=$(api_conf) -f $(flavor)
  displayName: 'Run test suite'
